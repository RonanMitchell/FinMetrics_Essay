---
output: 
 md_document:
   variant: markdown_github
---
The purpose of this README is to guide the reader through the decisions I made when writing my final Financial Econometrics research assignment (Masters in Economics). I selected the following question:

* "Study bond yield spreads - you have 10yr and 2yr bond yields. Calculate the spread and see if you can find any interesting patterns comparing yield spreads through time, linking it to VIX / currency volatility - and perhaps looking at other macro factors too."

This README will guide the reader through any code, functions, and output that was constructed for this assignment. 

# Interpretation of the Question

```{r include=FALSE, warning=FALSE}

rm(list = ls())

gc()

###

library(tidyverse)
library(ggplot2)

```

# Required Packages:

* tidyverse
* ggplot2

# Loading and Editing Data sets

```{r}

  # 2 year Global Bonds.

Global_2yr <- readRDS("data/BondYields_2Y.rds") %>%
    
   mutate(Name = gsub("_2yr", "", Name)) %>%
    
   mutate(Ticker = gsub("2Y", "", Ticker)) %>%
    
   filter(date >= "2010-01-01" & date <= "2022-03-31") %>%
    
   group_by(YearMonth = format(date, "%Y-%m")) %>%
    
   filter(date == max(date)) %>% 
    
   ungroup()

  # 10 year Global bonds.

Global_10yr <- readRDS("data/BondYields_10Y.rds") %>% 
    
   mutate(Name = gsub("_10Yr", "", Name)) %>% 
    
   mutate(Ticker = gsub("10Y", "", Ticker)) %>%
   
   filter(Name %in% Global_2yr$Name) %>% # Same bonds only
    
   filter(date >= "2010-01-01" & date <= "2022-03-31") %>%
    
   group_by(YearMonth = format(date, "%Y-%m")) %>%
    
   filter(date == max(date)) %>% 
    
   ungroup()

  # 2 year South African (SA) bonds. 

SA_2yr <- readRDS("data/BondYields_2Y_SA.rds") %>% 
    
   mutate(Name = gsub("_2Yr", "", Name)) %>%
    
   filter(date >= "2010-01-01" & date <= "2022-03-31") %>%
    
   group_by(YearMonth = format(date, "%Y-%m")) %>%
    
   filter(date == max(date)) %>% 
    
   ungroup()

  # 10 Year SA bonds.

SA_10yr <- readRDS("data/BondYields_10Y_SA.rds") %>% 
    
   mutate(Name = gsub("_10Yr", "", Name)) %>% 
    
   filter(date >= "2010-01-01" & date <= "2022-03-31") %>%
    
   group_by(YearMonth = format(date, "%Y-%m")) %>%
    
   filter(date == max(date)) %>% 
    
   ungroup()

```

The data sets all now start at the same date, and the global sets include the same bonds. At this point it is clear that we have COVID-19 Data. Perhaps we can do a sort of crisis bond yield analysis? 

```{r }

# Why are the data sets different lengths? 

source("code/Similarity_Checker_foo.R")

SimilarityChecker_foo(Global_10yr, Global_2yr, "date") # same dates 
SimilarityChecker_foo(Global_10yr, Global_2yr, "Name") # same countries 

SimilarityChecker_foo(
    
    Global_10yr, Global_2yr, "Ticker"
    
    ) # different bonds but same countries? 

###

Global_2yr <- 
    
    Global_2yr %>% 
    
    filter(
        
        Ticker %in% Global_10yr$Ticker) %>% 

# Removed some but still different number of observations. 
    
    #Duplicate dates? 

 distinct(Ticker, date, .keep_all = TRUE) # no duplicate dates 

# The culprit is, it turns out: 

print(table(Global_10yr$Name))

print(table(Global_2yr$Name))

# Different countries have different starting points in terms of dates, different numbers of observations each, between the two data sets. 

```


```{r }

# Isolating BRCIS countries: 

BRICS <- c(
    
    "Brazil", 
          
    "CHINA", 
          
    "India", 
           
    "Russia",
    
    "ZA"
    
    )

# Developed Countries: 

Dev_Count <- c(
    
    "Canada",
    
    "France",
    
    "Germany",
    
    "Japan",
    
    "Korea",
    
    "NZ",
    
    "Singapore",
    
    "UK",
    
    "US"
    
    )

# Developing Countries: 

Developing_vec <- unique(
    
    Global_2yr$Name[!Global_2yr$Name %in% Dev_Count])

```

```{r warning=FALSE}

source("code/Yield_Plotter_foo.R")

###

Yield_Plotter(Data = Global_10yr,
              Vec = Dev_Count, 
              y = BondYield_10,
              "Developed Countries (10-Year)")

Yield_Plotter(Data = Global_2yr,
              Vec = Dev_Count, 
              y = BondYield_2,
              "Developed Countries (2-Year)")

###

Yield_Plotter(Data = Global_10yr,
              Vec = Developing_vec, 
              y = BondYield_10,
              "Developing Countries (10-Year)")

Yield_Plotter(Data = Global_2yr,
              Vec = Developing_vec, 
              y = BondYield_2,
              "Developing Countries (2-Year)")

###

```

